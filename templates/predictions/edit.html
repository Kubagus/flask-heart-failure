{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h2>Edit Prediksi</h2>
    
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <form method="POST">
        <div class="row">
            <div class="col-md-6">
                <div class="form-group mb-3">
                    <label for="age">Usia</label>
                    <input type="number" class="form-control" id="age" name="age" value="{{ prediction['age'] }}" required>
                </div>
                <div class="form-group mb-3">
                    <label for="sex">Jenis Kelamin</label>
                    <select class="form-control" id="sex" name="sex" required>
                        <option value="M" {% if prediction['sex'] == 'M' %}selected{% endif %}>Laki-laki</option>
                        <option value="F" {% if prediction['sex'] == 'F' %}selected{% endif %}>Perempuan</option>
                    </select>
                </div>
                <div class="form-group mb-3">
                    <label for="chestpaintype">Tipe Nyeri Dada</label>
                    <select class="form-control" id="chestpaintype" name="chestpaintype" required>
                        <option value="TA" {% if prediction['chestpaintype'] == 'TA' %}selected{% endif %}>Typical Angina</option>
                        <option value="ATA" {% if prediction['chestpaintype'] == 'ATA' %}selected{% endif %}>Atypical Angina</option>
                        <option value="NAP" {% if prediction['chestpaintype'] == 'NAP' %}selected{% endif %}>Non-Anginal Pain</option>
                        <option value="ASY" {% if prediction['chestpaintype'] == 'ASY' %}selected{% endif %}>Asymptomatic</option>
                    </select>
                </div>
                <div class="form-group mb-3">
                    <label for="restingbp">Tekanan Darah Istirahat</label>
                    <input type="number" class="form-control" id="restingbp" name="restingbp" value="{{ prediction['restingbp'] }}" required>
                </div>
                <div class="form-group mb-3">
                    <label for="cholesterol">Kolesterol</label>
                    <input type="number" class="form-control" id="cholesterol" name="cholesterol" value="{{ prediction['cholesterol'] }}" required>
                </div>
                <div class="form-group mb-3">
                    <label for="fastingbs">Gula Darah Puasa</label>
                    <select class="form-control" id="fastingbs" name="fastingbs" required>
                        <option value="1" {% if prediction['fastingbs'] == 1 %}selected{% endif %}>> 120 mg/dl</option>
                        <option value="0" {% if prediction['fastingbs'] == 0 %}selected{% endif %}>â‰¤ 120 mg/dl</option>
                    </select>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group mb-3">
                    <label for="restingecg">ECG Istirahat</label>
                    <select class="form-control" id="restingecg" name="restingecg" required>
                        <option value="Normal" {% if prediction['restingecg'] == 'Normal' %}selected{% endif %}>Normal</option>
                        <option value="ST" {% if prediction['restingecg'] == 'ST' %}selected{% endif %}>ST-T Wave Abnormality</option>
                        <option value="LVH" {% if prediction['restingecg'] == 'LVH' %}selected{% endif %}>Left Ventricular Hypertrophy</option>
                    </select>
                </div>
                <div class="form-group mb-3">
                    <label for="maxhr">Detak Jantung Maksimum</label>
                    <input type="number" class="form-control" id="maxhr" name="maxhr" value="{{ prediction['maxhr'] }}" required>
                </div>
                <div class="form-group mb-3">
                    <label for="exerciseangina">Angina Saat Olahraga</label>
                    <select class="form-control" id="exerciseangina" name="exerciseangina" required>
                        <option value="Y" {% if prediction['exerciseangina'] == 'Y' %}selected{% endif %}>Ya</option>
                        <option value="N" {% if prediction['exerciseangina'] == 'N' %}selected{% endif %}>Tidak</option>
                    </select>
                </div>
                <div class="form-group mb-3">
                    <label for="oldpeak">Oldpeak</label>
                    <input type="number" step="0.1" class="form-control" id="oldpeak" name="oldpeak" value="{{ prediction['oldpeak'] }}" required>
                </div>
                <div class="form-group mb-3">
                    <label for="stslope">ST Slope</label>
                    <select class="form-control" id="stslope" name="stslope" required>
                        <option value="Up" {% if prediction['stslope'] == 'Up' %}selected{% endif %}>Up</option>
                        <option value="Flat" {% if prediction['stslope'] == 'Flat' %}selected{% endif %}>Flat</option>
                        <option value="Down" {% if prediction['stslope'] == 'Down' %}selected{% endif %}>Down</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="mt-4">
            <button type="submit" class="btn btn-primary">Simpan Perubahan</button>
            <a href="{{ url_for('prediction.view_prediction', id=prediction['id']) }}" class="btn btn-secondary">Batal</a>
        </div>
    </form>
</div>
{% endblock %} 